name: Publish on Itch.IO  ðŸŽ®
on: [workflow_call, workflow_dispatch]

jobs:
  release_windows:
    runs-on: ubuntu-latest
    steps:
       - name: Checkout code
         uses: actions/checkout@v3

       - uses: actions/download-artifact@v3
         with:
           name: build-ItchIO
           path: build

       - name: list-files
         run: ls -R
         working-directory: build/WebGL

#################
       - name: downloading
         uses: dsaltares/fetch-gh-release-asset@master
         with:
           file: kurzgesagt-html.zip

       - name: using-api-josephbmanley
         uses: josephbmanley/butler-publish-itchio-action@v1.0.3
         
    env:
      GITHUB_TOKEN: "${{ secrets.GH_CREDENTIALS }}"
      BUTLER_CREDENTIALS: ${{ secrets.ITCHIO_KEY }}
      CHANNEL: HTML
      ITCH_GAME: kurzgesagt
      ITCH_USER: spark8
      PACKAGE: build/build-ItchIO
      VERSION: ${{ steps.downloading.outputs.version }}


          
      
