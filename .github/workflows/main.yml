name: 4. Build Project 🏗️
on: [workflow_dispatch] # ,push]

env:
    UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}

jobs:
  Check-Unity-License:
    uses: ./check-unity-license.yml@main
    secrets: inherit

  Test-Runner:
    uses: ./test-runner.yml@main
    secrets: inherit

  Build-Release:
    needs: Test-Runner
    uses: ./release.yml@main

  Build-WebGL:
    needs: Test-Runner
    uses: ./deploy-to-webgl@main
    secrets: inherit

  Deploy-On-Github-Pages:
    needs: Build-WebGL
    uses: ./deploy-to-github-web.yml@main
    secrets: inherit

  Build-Windows:
    needs: Test-Runner
    uses: ./deploy-to-windows64.yml@main
    secrets: inherit

  Build-Android:
    needs: Test-Runner
    uses: ./deploy-to-android.yml@main
    secrets: inherit