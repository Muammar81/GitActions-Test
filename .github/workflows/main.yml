name: 4. Project Build üèóÔ∏è
on:
  workflow_dispatch:
  push:
    branches:    
      - main
      - 'releases/**'

env:
    UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
    repo: ${{ github.repository }}

jobs:
  Check-Unity-License:
    uses: ./.github/workflows/check-unity-license.yml
    secrets: inherit

  Test-Runner:
    uses: ./.github/workflows/test-runner.yml
    secrets: inherit

  Build-Release:
    needs: Test-Runner
    uses: ./.github/workflows/release.yml

  Build-WebGL:
    needs: Test-Runner
    uses: ./.github/workflows/deploy-to-webgl.yml
    secrets: inherit

  Deploy-On-Github-Pages:
    needs: Build-WebGL
    uses: ./.github/workflows/deploy-to-github-web.yml
    secrets: inherit

  Build-Windows:
    needs: Test-Runner
    uses: ./.github/workflows/deploy-to-windows64.yml
    secrets: inherit

  Build-Android:
    needs: Test-Runner
    uses: ./.github/workflows/deploy-to-android.yml
    secrets: inherit