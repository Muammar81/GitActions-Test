name: 1. Send MS Teams Notification ðŸ‘¥
on: 
  workflow_call:
    inputs:
      artifact_url:
        description: 'the full url to the built artifact'
        required: true
        type: string

jobs:
  teams-notify:
    runs-on: ubuntu-latest
    steps:

    - name: Test artifact URL
      run: echo "received inputs artifact URL is ${{ inputs.artifact_url }}"

    - name: Notify MS Teams
      run: |
        curl -X POST -H "Content-Type: application/json" -d '{
          "@type": "MessageCard",
          "@context": "https://schema.org/extensions",
          "summary": "Build and Test complete",
          "themeColor": "0076D7",
          "title": "Build and Test complete",
          "text": "The build and test for the code has completed.",
          "potentialAction": [
            {
              "@type": "OpenUri",
              "name": "View artifact",
              "targets": [
                { "os": "default", "uri": "${{ inputs.artifact_url }}" }
              ]
            }
          ]
        }' https://mesmerise.webhook.office.com/webhookb2/172b99c6-c9a2-470b-be0c-3beee855365d@233b7e4e-b571-4670-9c62-9f1433cd8236/IncomingWebhook/8c88e1ae57c84305b06e8005adb1bed3/57171776-04d0-41b2-8f9f-5b1ac269de75
#        }' ${{ secrets.MS_TEAMS_WEBHOOK_URL }}            


